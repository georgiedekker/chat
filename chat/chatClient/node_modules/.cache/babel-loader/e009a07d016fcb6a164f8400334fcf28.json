{"remainingRequest":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js!/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/georgedekker/Movies/dev/chat/client/src/App.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/georgedekker/Movies/dev/chat/client/src/App.vue","mtime":1628342050969},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7IC8vIGltcG9ydCBDaGF0SW5wdXQgZnJvbSAnLi9jb21wb25lbnRzL0NoYXRJbnB1dC52dWUnOwovLyBpbXBvcnQgQXBwQmFyIGZyb20gJy4vY29tcG9uZW50cy9BcHBCYXIudnVlJwovLyBpbXBvcnQgQ2hhdHMgZnJvbSAnLi9jb21wb25lbnRzL0NoYXRzLnZ1ZScKCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgaW8gfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKdmFyIG1lc3NhZ2VzID0gcmVhY3RpdmUoW10pOwp2YXIgdXNlciA9IHsKICBuYW1lOiAnc29tZSBuYW1lJyArIE1hdGgucmFuZG9tKCkgKiAxMDAwCn07CnZhciB1c2VybmFtZSA9IHVzZXIubmFtZTsKdmFyIHNvY2tldCA9IGlvKHByb2Nlc3MuZW52LlZVRV9BUFBfU09DS0VUX0VORFBPSU5ULCB7CiAgYXV0aDogewogICAgdG9rZW46ICdhYmMnLAogICAgbmFtZTogJ3N0YXJ0JwogIH0KfSk7CnNvY2tldC5vbigndXNlci1jb25uZWN0ZWQnLCBmdW5jdGlvbiAodXNyKSB7CiAgY29uc29sZS5sb2coJ3VzcjogJyArIHVzcik7IC8vIHN0b3JlLnVzZXIgPSB1c3J9KTsKfSk7CnNvY2tldC5vbignY29ubmVjdGlvbi1zdWNjZXNzJywgZnVuY3Rpb24gKHVzZXJGcm9tU2VydmVyKSB7CiAgY29uc29sZS5sb2coJ3VzZXIgZnJvbSBzZXJ2ZXI6ICcgKyBKU09OLnN0cmluZ2lmeSh1c2VyRnJvbVNlcnZlcikpOyAvLyBzdG9yZS51c2VyLm5hbWU9IHVzZXJGcm9tU2VydmVyfSk7CgogIHNvY2tldC5lbWl0KCduZXctdXNlcicsIHVzZXIpOyAvLyBjb25zb2xlLmxvZygnc3RvcmU6ICcrSlNPTi5zdHJpbmdpZnkoc3RvcmUpKQogIC8vIGxldCB1c2VyID0gc3RvcmUudXNlcgogIC8vIHJldHVybiBzb2NrZXQsIHN0b3JlLCB1c2VyCn0pOwpzb2NrZXQub24oJ2NoYXQtbWVzc2FnZScsIGZ1bmN0aW9uIChyZWNlaXZlZCkgewogIGNvbnNvbGUubG9nKCdyZWNlaXZlZCBjaGF0SW5wdXQ6ICcgKyBKU09OLnN0cmluZ2lmeShyZWNlaXZlZCkpOyAvLyAgbGV0IG1lc3NhZ2VzID0gW10KCiAgY29uc29sZS5sb2coJ3JlY2VpdmVkLnVzZXIubmFtZTogJyArIHJlY2VpdmVkLnVzZXIubmFtZSArICcgdXNlcm5hbWU6ICcgKyB1c2VybmFtZSk7CgogIGlmIChyZWNlaXZlZC51c2VyLm5hbWUgPT0gdXNlcm5hbWUpIHsKICAgIHJlY2VpdmVkLnVzZXIubmFtZSA9ICd5b3UnOwogIH0KCiAgaWYgKHJlY2VpdmVkLm1lc3NhZ2UgPT0gJ3JlY2VpdmVkIHlvdXIgbWVzc2FnZScpIHsKICAgIHJldHVybjsKICB9CgogIG1lc3NhZ2VzLnB1c2gocmVjZWl2ZWQpOwogIGNvbnNvbGUubG9nKG1lc3NhZ2VzLmxlbmd0aCk7CiAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZGV4Jyk7CgogIGlmIChlbCkgewogICAgZWwuc2Nyb2xsSW50b1ZpZXcoKTsKICAgIGVsLnNjcm9sbEludG9WaWV3KCk7CiAgfQoKICByZXR1cm4gbWVzc2FnZXM7Cn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgc3RvcmU6IHt9LAogIHNvY2tldDogc29ja2V0LAogIHVzZXI6IHVzZXIsCiAgbWVzc2FnZXM6IG1lc3NhZ2VzLAogIC8vIHN0b3JlOnt9LAogIC8vIG1vbWVudDptb21lbnQsCiAgLy8gdXNlcjogdGhpcy5zdG9yZS51c2VyLAogIC8vIHN0b3JlOnt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm1vbWVudCA9IG1vbWVudDsKICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gY29uc29sZS5sb2coZGF0YSk7CiAgICB9KTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdG9yZToge30sCiAgICAgIHVzZXI6IHVzZXIsCiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgc29ja2V0OiB7fSwKICAgICAgbWVzc2FnZToge30sCiAgICAgIGNoYXRNZXNzYWdlOiAnJywKICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoY2hhdE1lc3NhZ2UsIHVzZXJuYW1lKSB7CiAgICAgIGNvbnNvbGUubG9nKGNoYXRNZXNzYWdlICsgJyAnICsgdXNlcm5hbWUpOwogICAgICBzb2NrZXQuZW1pdCgnc2VuZC1jaGF0LW1lc3NhZ2UnLCBjaGF0TWVzc2FnZSwgewogICAgICAgIG5hbWU6IHVzZXJuYW1lCiAgICAgIH0pOyAvLyB1c2VyLm5hbWUgPSB1c2VyCgogICAgICB0aGlzLmNoYXRNZXNzYWdlID0gJyc7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TWVzc2FnZScpLmZvY3VzKCk7CiAgICB9LAogICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogICAgdW5tb3VudGVkOiBmdW5jdGlvbiB1bm1vdW50ZWQoKSB7CiAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/georgedekker/Movies/dev/chat/client/src/App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n       \n        <form>\n          <label for=\"chat\">Chat Message</label>\n          <input id=\"userName\" type=\"text\" autocomplete=\"off\" v-model=\"username\"/>\n          <input id=\"chatMessage\" type=\"text\" autocomplete=\"off\" v-model=\"chatMessage\"/>\n          <button v-on:click.prevent=\"submit(chatMessage, username)\">Send</button>\n        </form>\n         <ul>\n          <li v-for=\"(message, index) in messages\" :key=\"index\">\n            <!-- {{index }} index {{ message.message }} from {{message.user.name}} on {{moment(message.user.timeStamp).format('HH:mm:ss')}} -->\n              <p> {{ message.message }} <br/>\n              <sub>{{ message.user.name}} at {{moment(message.user.timeStamp).format('HH:mm:ss')}} </sub></p>\n          </li>\n        </ul>\n        <br />\n\n  <!-- <p>Message is: {{ messages }}</p> -->\n  <p id=\"index\">User name is: {{ username }}</p>\n<br />\n  <!-- <p>Store: {{ JSON.stringify(store) }}</p> -->\n \n</template>\n\n<script>\nimport { reactive } from 'vue';\n// import ChatInput from './components/ChatInput.vue';\n// import AppBar from './components/AppBar.vue'\n// import Chats from './components/Chats.vue'\nimport moment from 'moment';\nimport { io } from 'socket.io-client';\n\nlet messages = reactive([]);\nlet user = {name:'some name'+Math.random()*1000}\nlet username = user.name\nlet socket = io(process.env.VUE_APP_SOCKET_ENDPOINT, {\n                auth: {\n                token: 'abc',\n                name: 'start'\n                }\n                \n  });\n   socket.on('user-connected',  usr => {\n    console.log('usr: '+usr)\n    // store.user = usr});\n   });\n    socket.on('connection-success', userFromServer =>{\n    console.log('user from server: '+JSON.stringify(userFromServer))\n    // store.user.name= userFromServer});\n    socket.emit('new-user', user);\n   \n    // console.log('store: '+JSON.stringify(store))\n    // let user = store.user\n    // return socket, store, user\n    })\n     socket.on('chat-message', received => {\n      console.log('received chatInput: '+JSON.stringify(received))\n    //  let messages = []\n    console.log('received.user.name: '+received.user.name+ ' username: '+username)\n    if(received.user.name==username){\n      received.user.name='you'\n    }\n    if(received.message=='received your message'){\n      return\n    }\n     messages.push(received)\n     console.log(messages.length)\n     const el = document.getElementById('index');\n      if (el) {\n        el.scrollIntoView();\n        el.scrollIntoView();\n      }\n     return messages\n      })\n \nexport default {\n  name:'App',\n  store:{},\n  socket:socket,\n  user:user,\n  messages:messages,\n    // store:{},\n  // moment:moment,\n  // user: this.store.user,\n  // store:{},\n  created: function () {\n    this.moment = moment;\n    fetch('http://localhost:3000')      \n    .then( response => response.json())\n    .then(data => console.log(data))\n  },\n  data() {\n    return{\n    store:{},\n    user:user,\n    username:username,\n    socket:{},\n    message:{},\n    chatMessage:'',\n    messages:messages,\n  }},\n  methods: {\n    submit (chatMessage,username){ \n   console.log(chatMessage+' '+username)\n   socket.emit('send-chat-message',chatMessage, {name:username})\n      // user.name = user\n      \n       this.chatMessage = '';\n      document.getElementById('chatMessage').focus()\n  },\nmounted(){\n \n},\nunmounted(){\nsocket.disconnect()\n},\n}\n}\n\n</script>\n<style>\n      body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif; }\n\n      form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }\n      input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 2rem; margin: 0.25rem; }\n      input:focus { outline: none; }\n      form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }\n\n      ul { list-style-type: none; margin: 0; padding: 0; }\n      ul > li { padding: 0.5rem 1rem; }\n      ul > li:nth-child(odd) { background: #efefef; }\n    </style>"],"sourceRoot":""}]}