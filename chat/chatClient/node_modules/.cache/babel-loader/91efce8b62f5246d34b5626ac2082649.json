{"remainingRequest":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js!/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/georgedekker/Movies/dev/chat/client/src/App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"/Users/georgedekker/Movies/dev/chat/client/src/App.vue","mtime":1628513663577},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycywgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUgfSBmcm9tICJ2dWUiOwoKdmFyIF9ob2lzdGVkXzEgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJsYWJlbCIsIHsKICBmb3I6ICJjaGF0Igp9LCAiTWVzc2FnZSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8yID0gewogIGlkOiAibWVzc2FnZXMiCn07Cgp2YXIgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImJyIiwgbnVsbCwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzQgPSB7CiAga2V5OiAwLAogIGlkOiAiaW5kZXhMYXN0Igp9OwoKdmFyIF9ob2lzdGVkXzUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF82ID0gewogIGlkOiAiaW5kZXhzIgp9OwoKdmFyIF9ob2lzdGVkXzcgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVWTm9kZSgiZm9ybSIsIG51bGwsIFtfaG9pc3RlZF8xLCBfY3JlYXRlQ29tbWVudFZOb2RlKCIgPGlucHV0IGlkPVwidXNlck5hbWVcIiB0eXBlPVwidGV4dFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiIHYtbW9kZWw9XCJ1c2VyTmFtZVwiLz4gIiksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgaWQ6ICJjaGF0TWVzc2FnZSIsCiAgICB0eXBlOiAidGV4dCIsCiAgICBhdXRvY29tcGxldGU6ICJvZmYiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLmNoYXRNZXNzYWdlID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEuY2hhdE1lc3NhZ2VdXSksIF9jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBfd2l0aE1vZGlmaWVycyhmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5zdWJtaXQoJGRhdGEuY2hhdE1lc3NhZ2UsICRkYXRhLnVzZXJOYW1lKTsKICAgIH0sIFsicHJldmVudCJdKSkKICB9LCAiU2VuZCIpXSksIF9jcmVhdGVWTm9kZSgidWwiLCBfaG9pc3RlZF8yLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLm1lc3NhZ2VzLCBmdW5jdGlvbiAobWVzc2FnZSwgaW5kZXgpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygibGkiLCB7CiAgICAgIGtleTogaW5kZXgKICAgIH0sIFtfY3JlYXRlQ29tbWVudFZOb2RlKCIge3tpbmRleCB9fSBpbmRleCB7eyBtZXNzYWdlLm1lc3NhZ2UgfX0gZnJvbSB7e21lc3NhZ2UudXNlci5uYW1lfX0gb24ge3ttb21lbnQobWVzc2FnZS51c2VyLnRpbWVTdGFtcCkuZm9ybWF0KCdISDptbTpzcycpfX0gIiksIF9jcmVhdGVWTm9kZSgicCIsIG51bGwsIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcobWVzc2FnZS5tZXNzYWdlKSArICIgIiwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2hvaXN0ZWRfMywgX2NyZWF0ZVZOb2RlKCJzdWIiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKG1lc3NhZ2UudXNlci5uYW1lKSArICIgYXQgIiArIF90b0Rpc3BsYXlTdHJpbmcoX2N0eC5tb21lbnQobWVzc2FnZS51c2VyLnRpbWVTdGFtcCkuZm9ybWF0KCdISDptbTpzcycpKSwgMQogICAgLyogVEVYVCAqLwogICAgKV0pLCBpbmRleCA9PSAkZGF0YS5tZXNzYWdlcy5sZW5ndGggLSAxID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJwIiwgX2hvaXN0ZWRfNCwgIlVzZXIgbmFtZSBpczogIiArIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEudXNlck5hbWUpLCAxCiAgICAvKiBURVhUICovCiAgICApKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSksIF9ob2lzdGVkXzUsIF9jcmVhdGVWTm9kZSgicCIsIG51bGwsICIgcm9vbTogIiArIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEucm9vbSksIDEKICAvKiBURVhUICovCiAgKSwgX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIDxwPk1lc3NhZ2UgaXM6IHt7IG1lc3NhZ2VzIH19PC9wPiAiKSwgX2NyZWF0ZVZOb2RlKCJwIiwgX2hvaXN0ZWRfNiwgIlVzZXIgbmFtZSBpczogIiArIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEudXNlck5hbWUpLCAxCiAgLyogVEVYVCAqLwogICksIF9ob2lzdGVkXzcsIF9jcmVhdGVDb21tZW50Vk5vZGUoIiA8cD5TdG9yZToge3sgSlNPTi5zdHJpbmdpZnkoc3RvcmUpIH19PC9wPiAiKV0sIDY0CiAgLyogU1RBQkxFX0ZSQUdNRU5UICovCiAgKTsKfQ=="},{"version":3,"sources":["/Users/georgedekker/Movies/dev/chat/client/src/App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n       \n        <form>\n          <label for=\"chat\">Message</label>\n          <!-- <input id=\"userName\" type=\"text\" autocomplete=\"off\" v-model=\"userName\"/> -->\n          <input id=\"chatMessage\" type=\"text\" autocomplete=\"off\" v-model=\"chatMessage\"/>\n          <button v-on:click.prevent=\"submit(chatMessage, userName)\">Send</button>\n        </form>\n         <ul id=\"messages\">\n          <li v-for=\"(message, index) in messages\" :key=\"index\">\n            <!-- {{index }} index {{ message.message }} from {{message.user.name}} on {{moment(message.user.timeStamp).format('HH:mm:ss')}} -->\n              <p> {{ message.message }} <br/>\n              <sub>{{ message.user.name}} at {{moment(message.user.timeStamp).format('HH:mm:ss')}} </sub></p>\n              <p v-if=\"index==messages.length-1\"  id=\"indexLast\">User name is: {{ userName }}</p>\n          </li>\n        </ul>\n        <br />\n<p> room: {{ room }} </p>\n  <!-- <p>Message is: {{ messages }}</p> -->\n  <p id=\"indexs\">User name is: {{ userName }}</p>\n<br />\n  <!-- <p>Store: {{ JSON.stringify(store) }}</p> -->\n \n</template>\n\n<script>\nimport { reactive, ref } from 'vue';\n// import ChatInput from './components/ChatInput.vue';\n// import AppBar from './components/AppBar.vue'\n// import Chats from './components/Chats.vue'\nimport moment from 'moment';\nimport { io } from 'socket.io-client';\n\nlet room = ref('');\nlet messages = reactive([]);\nlet user = {name:'someName'+Math.random()*1000}\nlet userName = user.name\nlet socket = io(process.env.VUE_APP_SOCKET_ENDPOINT, {\n                auth: {\n                token: 'abc',\n                name: 'start'\n                }\n                \n  });\n\n\n  socket.emit('new-user', userName, 'start');\n   socket.on('user-connected',  usr => {\n    console.log('usr: '+usr)\n    // store.user = usr});\n   });\n    socket.on('connection-success', userFromServer =>{\n    console.log('user from server: '+JSON.stringify(userFromServer))\n    // store.user.name= userFromServer});\n    socket.emit('new-user', user);\n    })\n    socket.on('messages', mssages =>{\n     console.log('messages received: '+mssages.result.length)\n     let i = 0\n    const el = document.getElementById('indexs');\n      \n     for(i=0; i<mssages.result.length;i++){\n      if (el) {\n       console.log('message i: '+mssages.result[i].user.timeStamp)\n       document.getElementById('indexs').scrollIntoView({behavior:'smooth'})\n       messages.push(mssages.result[i])\n      //  document.getElementById('messages').lastChild.scrollIntoView({behavior:'smooth'})\n      //  document.getElementById('indexLast').scrollIntoView({behavior:'smooth'})\n       document.getElementById('chatMessage').focus()\n     }}\n    //  messages.push(...mssages.result)\n     \n    //  document.getElementById('indexs').focus()\n    //   document.getElementById('chatMessage').focus()\n    //   document.getElementById('indexs').scrollIntoView({behavior:'smooth'})\n   })\n     socket.on('chat-message', received => {\n      console.log('received chatInput: '+JSON.stringify(received))\n    //  let messages = []\n    console.log('received.user.name: '+received.user.name+ ' userName: '+userName)\n    if(received.user.name==userName){\n      received.user.name='you'\n    }\n    if(received.message=='received your message'){\n      return\n    }\n     messages.push(received)\n     console.log(messages.length)\n     \n    const el = document.getElementById('indexs');\n      if (el) {\n        el.scrollIntoView({behavior: 'smooth'});\n        el.scrollIntoView({behavior: 'smooth'});\n      }\n      \n     return messages\n     \n      })\n  \nexport default {\n  name:'App',\n  store:{},\n  socket:socket,\n  user:user,\n  messages:messages,\n  room:'',\n  created: function () {\n    this.moment = moment;\n    fetch(\"http://localhost:3010/room/\")\n  .then(function(response) {\n    return response.text();\n  })\n  .then(function(data) {\n    console.log(data);\n    room = data\n    console.log(room)\n    return room.value\n  });\n  },\n  data() {\n    return{\n    store:{},\n    user:user,\n    room:'',\n    userName:userName,\n    socket:{},\n    message:{},\n    chatMessage:'',\n    messages:messages,\n  }},\n  methods: {\n   \n    submit (chatMessage,userName){ \n   console.log(chatMessage+' '+userName)\n   socket.emit('send-chat-message',chatMessage, {name:userName})\n      // user.name = user\n      \n       this.chatMessage = '';\n      document.getElementById('chatMessage').focus()\n  },\n  //  \n  // document.addEventListener(\"DOMContentLoaded\", function(){\n  //  console.log('DOMContentLoaded')\n      // document.getElementById('indexs').scrollIntoView({behavior:'smooth'})\n      // })\n//   document.getElementById('chatMessage').focus()\n//  const el = document.getElementById('indexs');\n//       if (el) {\n//         el.scrollIntoView({behavior: 'smooth'});\n//         el.scrollIntoView({behavior: 'smooth'});\n//       }\n     \n// },\nunmounted(){\nsocket.disconnect()\n},\n}\n}\n\n</script>\n<style>\n      body { margin: 0rem; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif; }\n\n      form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }\n      input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 3rem; margin: 0.25rem; } \n      input:focus { outline: none; }\n      form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }\n\n      ul { list-style-type: none; margin: 0; padding: 0; }\n      ul > li { padding: 0.25rem 1rem; }\n      ul > li:nth-child(odd) { background: #efefef; }\n      /* ul > li:nth-last-child(1):focus { outline:none;} */\n    </style>"],"sourceRoot":""}]}