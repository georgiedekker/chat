{"remainingRequest":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js!/Users/georgedekker/Movies/dev/chat/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/georgedekker/Movies/dev/chat/client/services/socketio.service.js","dependencies":[{"path":"/Users/georgedekker/Movies/dev/chat/client/services/socketio.service.js","mtime":1628148822819},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/georgedekker/Movies/dev/chat/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvZ2VvcmdlZGVra2VyL01vdmllcy9kZXYvY2hhdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvZ2VvcmdlZGVra2VyL01vdmllcy9kZXYvY2hhdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvZ2VvcmdlZGVra2VyL01vdmllcy9kZXYvY2hhdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7Cgp2YXIgU29ja2V0aW9TZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTb2NrZXRpb1NlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU29ja2V0aW9TZXJ2aWNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNvY2tldCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyb29tIiwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidXNlciIsIHsKICAgICAgbmFtZTogJ3VzZXJOYW1lJyArIHRoaXMucm9vbQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyb29tcyIsIHt9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoYXRNZXNzYWdlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1lc3NhZ2UiLCB2b2lkIDApOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNvY2tldGlvU2VydmljZSwgW3sKICAgIGtleTogInNvY2tldENyZWF0ZWQiLAogICAgdmFsdWU6IC8vIHJvb21zW3Jvb21dID0geyB1c2Vyczoge30gfQogICAgLy8gcm9vbXNbcm9vbV0udXNlcnNbc29ja2V0LmlkXSA9IG5hbWUKICAgIGZ1bmN0aW9uIHNvY2tldENyZWF0ZWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBwcm9jZXNzLmVudi5WVUVfQVBQX1NPQ0tFVF9FTkRQT0lOVAogICAgICAvLyB0aGlzLnNvY2tldCA9IGlvKCBwcm9jZXNzLmVudi5WVUVfQVBQX1NPQ0tFVF9FTkRQT0lOVCk7CiAgICAgIHRoaXMuc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuVlVFX0FQUF9TT0NLRVRfRU5EUE9JTlQsIHsKICAgICAgICBhdXRoOiB7CiAgICAgICAgICB0b2tlbjogJ2FiYycsCiAgICAgICAgICBuYW1lOiB0aGlzLnVzZXIubmFtZQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKCdjb25uZWN0aW9uLXN1Y2Nlc3MnLCBmdW5jdGlvbiAodXNlckZyb21TZXJ2ZXIpIHsKICAgICAgICBfdGhpcy51c2VyID0gdXNlckZyb21TZXJ2ZXI7CiAgICAgICAgcmV0dXJuIF90aGlzLnVzZXI7CiAgICAgIH0pOyAvLyB0aGlzLnVzZXJbJ25hbWUnXSA9IHRoaXMudXNlck5hbWUKICAgICAgLy8gY29uc29sZS5sb2coJ2Fib3V0IHRvIGVtaXQgbmV3LXVzZXI6ICcrSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKSkKCiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ25ldy11c2VyJywgdGhpcy51c2VyKTsKICAgICAgdGhpcy5zb2NrZXQub24oJ3VzZXItY29ubmVjdGVkJywgZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBfdGhpcy51c2VyID0gdXNlcjsgLy8gY29uc29sZS5sb2coJ3VzZXJOYW1lOiAnK3RoaXMudXNlci5uYW1lKycgJytKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXIpKQoKICAgICAgICByZXR1cm4gX3RoaXMudXNlcjsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKCdjaGF0LW1lc3NhZ2UnLCBmdW5jdGlvbiAocmVjZWl2ZWQpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygnU29ja2V0aW9TZXJ2aWNlLm9uIGNoYXQtbWVzc2FnZSByZWNlaXZlZDonK3JlY2VpdmVkLm1lc3NhZ2UpCiAgICAgICAgLy8gcmVjZWl2ZWQudXNlciA9IHJlY2VpdmVkLnVzZXIKICAgICAgICAvLyB0aGlzLnVzZXIubmFtZSA9IHJlY2VpdmVkLnVzZXIubmFtZQogICAgICAgIC8vIHRoaXMudXNlci50aW1lU3RhbXAgPSBEYXRlLm5vdygpCiAgICAgICAgLy8gY29uc29sZS5sb2coJ21lc3NhZ2UgZnJvbSB1c2VyOiAnK3JlY2VpdmVkLm1lc3NhZ2UrJyBmcm9tOiAnK3RoaXMudXNlci5uYW1lKycgYXQ6ICcrSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKSkKICAgICAgICAvLyByZXR1cm4ge21lc3NhZ2U6IG1lc3NhZ2VDaGF0Lm1lc3NhZ2UsIHVzZXI6dGhpcy51c2VyfQogICAgICAgIC8vIHJldHVybiB0ZW1wCiAgICAgICAgcmV0dXJuIHJlY2VpdmVkOwogICAgICB9KTsgLy8gdGhpcy5zb2NrZXQub24oJ2NoYXQtbWVzc2FnZScsKGNoYXRNZXNzYWdlKSA9PiB7CiAgICAgIC8vICB0aGlzLmNoYXRNZXNzYWdlID0gY2hhdE1lc3NhZ2UKICAgICAgLy8gIHJldHVybiB0aGlzLmNoYXRNZXNzYWdlIAogICAgICAvLyB9KQogICAgfQogIH0sIHsKICAgIGtleTogImRpc2Nvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIC8vIGlmIChzb2NrZXQpIHsKICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpOyAvLyB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZE1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKGNoYXRNZXNzYWdlLCB1c2VyKSB7CiAgICAgIC8vIHRoaXMudXNlci5uYW1lID0gdXNlci5uYW1lCiAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGF0TWVzc2FnZSBsaWI6ICcrY2hhdE1lc3NhZ2UsIHVzZXIpCiAgICAgIHRoaXMudXNlci5uYW1lID0gdXNlci5uYW1lOwogICAgICB0aGlzLnNvY2tldC5lbWl0KCdzZW5kLWNoYXQtbWVzc2FnZScsIGNoYXRNZXNzYWdlLCB0aGlzLnVzZXIpOwogICAgICByZXR1cm4gewogICAgICAgIG1lc3NhZ2U6IGNoYXRNZXNzYWdlLAogICAgICAgIHVzZXI6IHRoaXMudXNlcgogICAgICB9OyAvLyBjb25zb2xlLmxvZygndXNlciBmcm9tIHNlbmQtY2hhdC1tZXNzYWdlOiAnK0pTT04uc3RyaW5naWZ5KHVzZXIpKQogICAgICAvLyByZXR1cm4ge21lc3NhZ2U6IHRoaXMubWVzc2FnZUNoYXQubWVzc2FnZSwgdXNlcjp0aGlzLnVzZXJ9CiAgICB9IC8vIHRoaXMuc29ja2V0Lm9uKCdjaGF0LW1lc3NhZ2UnLCAoZGF0YSkgPT4gewogICAgLy8gICAvLyAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Zyb20gc2VydmVyOiAnK2RhdGEpCiAgICAvLyAgIC8vICAgICAgICAgICAgICAgLy8gfSkKICAgIC8vIH0KICAgIC8vIHRoaXMucmVjZWl2ZU1lc3NhZ2UoY2hhdE1lc3NhZ2UpCiAgICAvLyByZWNlaXZlTWVzc2FnZShjaGF0TWVzc2FnZSl7CiAgICAvLyAgIGNvbnNvbGUubG9nKCdtb3VudGVkIHJlYWR5IHRvIHJlY2VpdmUgbWVzc2FnZScrY2hhdE1lc3NhZ2UpCiAgICAvLyB9CiAgICAvLyAgIHNvY2tldDsKICAgIC8vICAgcm9vbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKTsKICAgIC8vICAgbmFtZSA9ICd1c2VyTmFtZScrdGhpcy5yb29tOwogICAgLy8gICBjb25zdHJ1Y3RvcigpIHt9CiAgICAvLyAgIHNldHVwU29ja2V0Q29ubmVjdGlvbigpIHsKICAgIC8vICAgICB0aGlzLnNvY2tldCA9IGlvKHByb2Nlc3MuZW52LlZVRV9BUFBfU09DS0VUX0VORFBPSU5UKTsKICAgIC8vICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBpbyhwcm9jZXNzLmVudi5WVUVfQVBQX1NPQ0tFVF9FTkRQT0lOVCwgewogICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJ2FiYycKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgICAgIH0pOwogICAgLy8gICAgICAgICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCduZXctdXNlcicsIHRoaXMucm9vbSwgdGhpcy5uYW1lKTsKICAgIC8vICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oJ3VzZXItY29ubmVjdGVkJywgIG5hbWUgPT4gewogICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5hbWUpCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgIC8vICAgICAgICAgICAgICAgLy8gdGhpcy5zb2NrZXQub24oJ2NoYXQtbWVzc2FnZScsIChkYXRhKSA9PiB7CiAgICAvLyAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Zyb20gc2VydmVyOiAnK2RhdGEpCiAgICAvLyAgICAgICAgICAgICAgIC8vIH0pCiAgICAvLyAgICAgICAgICAgICAgIC8vIHRoaXMuc29ja2V0LmVtaXQoJ3NlbmQtY2hhdC1tZXNzYWdlJywgdGhpcy5yb29tLCB0aGlzLm1lc3NhZ2UpOwogICAgLy8gfQogICAgLy8gICBkaXNjb25uZWN0KCkgewogICAgLy8gICAgICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHsKICAgIC8vICAgICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgIC8vICAgICAgICAgICAgICAgfQogICAgLy8gICAgICAgICAgIH0KCiAgfV0pOwoKICByZXR1cm4gU29ja2V0aW9TZXJ2aWNlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCBuZXcgU29ja2V0aW9TZXJ2aWNlKCk7"},{"version":3,"sources":["/Users/georgedekker/Movies/dev/chat/client/services/socketio.service.js"],"names":["io","SocketioService","Math","floor","random","name","room","socket","process","env","VUE_APP_SOCKET_ENDPOINT","auth","token","user","on","userFromServer","emit","received","disconnect","chatMessage","message"],"mappings":";;;;AAAA,SAASA,EAAT,QAAmB,kBAAnB;;IAEMC,e;;;;;;kCAGGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAc,IAAzB,C;;kCACA;AAAEC,MAAAA,IAAI,EAAE,aAAW,KAAKC;AAAxB,K;;mCACC,E;;;;;;;;;WAIR;AACA;AACA,6BAAe;AAAA;;AACb;AACF;AACA,WAAKC,MAAL,GAAcP,EAAE,CAACQ,OAAO,CAACC,GAAR,CAAYC,uBAAb,EAAsC;AACxCC,QAAAA,IAAI,EAAE;AACNC,UAAAA,KAAK,EAAE,KADD;AAENP,UAAAA,IAAI,EAAE,KAAKQ,IAAL,CAAUR;AAFV;AADkC,OAAtC,CAAhB;AAMA,WAAKE,MAAL,CAAYO,EAAZ,CAAe,oBAAf,EAAqC,UAAAC,cAAc,EAAG;AACpD,QAAA,KAAI,CAACF,IAAL,GAAYE,cAAZ;AACF,eAAO,KAAI,CAACF,IAAZ;AAAiB,OAFjB,EATe,CAYf;AACA;;AACA,WAAKN,MAAL,CAAYS,IAAZ,CAAiB,UAAjB,EAA6B,KAAKH,IAAlC;AACA,WAAMN,MAAN,CAAaO,EAAb,CAAgB,gBAAhB,EAAmC,UAAAD,IAAI,EAAI;AACzC,QAAA,KAAI,CAACA,IAAL,GAAYA,IAAZ,CADyC,CAEzC;;AACA,eAAO,KAAI,CAACA,IAAZ;AACe,OAJjB;AAKA,WAAKN,MAAL,CAAYO,EAAZ,CAAe,cAAf,EAA+B,UAACG,QAAD,EAAc;AAC3C;AACA;AACA;AACA;AACF;AACA;AACA;AACA,eAAOA,QAAP;AACD,OATC,EApBe,CA8Bf;AACA;AACA;AACA;AACC;;;WAED,sBAAa;AACC;AACc,WAAKV,MAAL,CAAYW,UAAZ,GAFf,CAGC;AACC;;;WAEf,qBAAYC,WAAZ,EAAyBN,IAAzB,EAA8B;AAC5B;AACA;AACA,WAAKA,IAAL,CAAUR,IAAV,GAAiBQ,IAAI,CAACR,IAAtB;AACA,WAAKE,MAAL,CAAYS,IAAZ,CAAiB,mBAAjB,EAAsCG,WAAtC,EAAmD,KAAKN,IAAxD;AACA,aAAO;AAACO,QAAAA,OAAO,EAACD,WAAT;AAAsBN,QAAAA,IAAI,EAAC,KAAKA;AAAhC,OAAP,CAL4B,CAM5B;AAEJ;AACG,K,CAEH;AACA;AACA;AACA;AACE;AAEF;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAIA;AACA;AACA;AACA;AACA;;;;;;;AAMA,eAAe,IAAIZ,eAAJ,EAAf","sourcesContent":["import { io } from 'socket.io-client';\n\nclass SocketioService {\n  \n  socket;\n  room = Math.floor(Math.random()*1000);\n  user = { name: 'userName'+this.room};\n  rooms = {  };\n  chatMessage;\n  message;\n  \n  // rooms[room] = { users: {} }\n  // rooms[room].users[socket.id] = name\n  socketCreated(){\n    // process.env.VUE_APP_SOCKET_ENDPOINT\n  // this.socket = io( process.env.VUE_APP_SOCKET_ENDPOINT);\n  this.socket = io(process.env.VUE_APP_SOCKET_ENDPOINT, {\n                auth: {\n                token: 'abc',\n                name: this.user.name\n                }\n  });\n  this.socket.on('connection-success', userFromServer =>{\n    this.user = userFromServer\n  return this.user});\n  // this.user['name'] = this.userName\n  // console.log('about to emit new-user: '+JSON.stringify(this.user))\n  this.socket.emit('new-user', this.user);\n  this. socket.on('user-connected',  user => {\n    this.user = user\n    // console.log('userName: '+this.user.name+' '+JSON.stringify(this.user))\n    return this.user\n                  })\n  this.socket.on('chat-message', (received) => {\n    // console.log('SocketioService.on chat-message received:'+received.message)\n    // received.user = received.user\n    // this.user.name = received.user.name\n    // this.user.timeStamp = Date.now()\n  // console.log('message from user: '+received.message+' from: '+this.user.name+' at: '+JSON.stringify(this.user))\n  // return {message: messageChat.message, user:this.user}\n  // return temp\n  return received\n})                               \n  // this.socket.on('chat-message',(chatMessage) => {\n  //  this.chatMessage = chatMessage\n  //  return this.chatMessage \n  // })\n  }\n  \n  disconnect() {\n                // if (socket) {\n                              this.socket.disconnect();\n                // }\n                }\n\n  sendMessage(chatMessage, user){\n    // this.user.name = user.name\n    // console.log('chatMessage lib: '+chatMessage, user)\n    this.user.name = user.name\n    this.socket.emit('send-chat-message', chatMessage, this.user);\n    return {message:chatMessage, user:this.user}\n    // console.log('user from send-chat-message: '+JSON.stringify(user))\n  \n// return {message: this.messageChat.message, user:this.user}\n  }\n    \n// this.socket.on('chat-message', (data) => {\n//   //               //               console.log('from server: '+data)\n//   //               // })\n// }\n  // this.receiveMessage(chatMessage)\n\n// receiveMessage(chatMessage){\n//   console.log('mounted ready to receive message'+chatMessage)\n// }\n//   socket;\n//   room = Math.floor(Math.random()*1000);\n//   name = 'userName'+this.room;\n  \n\n//   constructor() {}\n\n//   setupSocketConnection() {\n//     this.socket = io(process.env.VUE_APP_SOCKET_ENDPOINT);\n    \n//               this.socket = io(process.env.VUE_APP_SOCKET_ENDPOINT, {\n//                             auth: {\n//                             token: 'abc'\n//                             }\n//               });\n                       \n              \n              \n//               this.socket.emit('new-user', this.room, this.name);\n\n//               this.socket.on('user-connected',  name => {\n//                             console.log(name)\n//                             })\n\n//               // this.socket.on('chat-message', (data) => {\n//               //               console.log('from server: '+data)\n//               // })\n\n//               // this.socket.emit('send-chat-message', this.room, this.message);\n\n// }\n\n\n\n//   disconnect() {\n//               if (this.socket) {\n//                   this.socket.disconnect();\n//               }\n//           }\n\n}\n\n\n\nexport default new SocketioService();"]}]}